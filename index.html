<!DOCTYPE html>
<html lang="en" class=""><head><script>window.livecodes = window.livecodes || {};</script><title>DeepAI Code Snippet (fork) (fork)</title><meta name="title" content="DeepAI Code Snippet (fork) (fork)"><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"><style id="__livecodes_styles__"></style><script src="https://cdn.jsdelivr.net/npm/es-module-shims@1.10.0/dist/es-module-shims.js" async=""></script><script type="importmap">{
  "imports": {}
}</script></head><body>


<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Permutation List &amp; Export</title>
<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f4f4f4;
    margin: 0;
    padding: 10px;
  }
  #container {
    max-width: 600px;
    margin: auto;
    font-size: 0.9em;
  }
  h1 {
    text-align: center;
    font-weight: bold;
    font-size: 1.2em;
    margin-bottom: 0.5em;
  }
  p {
    text-align: center;
    margin-bottom: 0.5em;
  }
  .inputs {
    display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
  }
  .chart-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 0.5em 0;
  }
  .chart-title {
    font-weight: bold;
    margin-bottom: 0.3em;
    font-size: 1em;
  }
  .grid {
    display: grid;
    grid-template-columns: repeat(4, 40px);
    gap: 6px;
  }
  input[type=number] {
    width: 40px;
    height: 40px;
    font-size: 1em;
    text-align: center;
    border: 2px solid #4CAF50;
    border-radius: 4px;
    outline: none;
  }
  button {
    margin: 0.5em 0.5em 1em 0.5em;
    padding: 8px 16px;
    font-size: 0.9em;
    border-radius: 4px;
    border: none;
    cursor: pointer;
  }
  #generateBtn {
    background-color: #4CAF50;
    color: white;
  }
  #generateBtn:hover {
    background-color: #45a049;
  }
  #exportBtn {
    background-color: #2196F3;
    color: white;
  }
  #exportBtn:hover {
    background-color: #0b7dda;
  }
  /* Results styling */
  #resultsContainer {
    background: #fff;
    padding: 0.5em;
    border-radius: 8px;
    margin-top: 1em;
    max-height: 80vh;
    overflow-y: auto;
    transition: max-height 0.3s ease;
  }
  h2 {
    font-size: 1em;
    margin-top: 0.8em;
    margin-bottom: 0.3em;
  }
  .list-container {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
    padding: 4px;
  }
  .permutation {
    display: inline-block;
    margin: 2px;
    padding: 2px 6px;
    background: #e0f7fa;
    border-radius: 4px;
    font-family: monospace;
    font-size: 0.9em;
  }
</style>


<div id="container">
<h1>Permutation List &amp; Export</h1>
<p>Enter numbers (0-9) in both grids. The system will generate all 4-digit permutations and display them.</p>

<div class="inputs">
  <!-- Chart 1 -->
  <div class="chart-container">
    <div class="chart-title">Chart 1</div>
    <div class="grid" id="grid1">
      <input type="number" min="0" max="9" id="g1-0">
      <input type="number" min="0" max="9" id="g1-1">
      <input type="number" min="0" max="9" id="g1-2">
      <input type="number" min="0" max="9" id="g1-3">
      <input type="number" min="0" max="9" id="g1-4">
      <input type="number" min="0" max="9" id="g1-5">
      <input type="number" min="0" max="9" id="g1-6">
      <input type="number" min="0" max="9" id="g1-7">
      <input type="number" min="0" max="9" id="g1-8">
      <input type="number" min="0" max="9" id="g1-9">
      <input type="number" min="0" max="9" id="g1-10">
      <input type="number" min="0" max="9" id="g1-11">
      <input type="number" min="0" max="9" id="g1-12">
      <input type="number" min="0" max="9" id="g1-13">
      <input type="number" min="0" max="9" id="g1-14">
      <input type="number" min="0" max="9" id="g1-15">
    </div>
  </div>
  <!-- Chart 2 -->
  <div class="chart-container">
    <div class="chart-title">Chart 2</div>
    <div class="grid" id="grid2">
      <input type="number" min="0" max="9" id="g2-0">
      <input type="number" min="0" max="9" id="g2-1">
      <input type="number" min="0" max="9" id="g2-2">
      <input type="number" min="0" max="9" id="g2-3">
      <input type="number" min="0" max="9" id="g2-4">
      <input type="number" min="0" max="9" id="g2-5">
      <input type="number" min="0" max="9" id="g2-6">
      <input type="number" min="0" max="9" id="g2-7">
      <input type="number" min="0" max="9" id="g2-8">
      <input type="number" min="0" max="9" id="g2-9">
      <input type="number" min="0" max="9" id="g2-10">
      <input type="number" min="0" max="9" id="g2-11">
      <input type="number" min="0" max="9" id="g2-12">
      <input type="number" min="0" max="9" id="g2-13">
      <input type="number" min="0" max="9" id="g2-14">
      <input type="number" min="0" max="9" id="g2-15">
    </div>
  </div>
</div>

<div style="text-align:center;">
  <button id="generateBtn">Generate</button>
  <button id="exportBtn">Export as JPEG</button>
</div>

<div id="resultsContainer">
<h2>Exact Matching Permutations</h2>
<div class="list-container" id="exactMatches"></div>
<h2>Similar Permutations</h2>
<div class="list-container" id="similarMatches"></div>
</div>
</div>

<script>
  const btnGenerate = document.getElementById('generateBtn');
  const btnExport = document.getElementById('exportBtn');
  const exactMatchesDiv = document.getElementById('exactMatches');
  const similarMatchesDiv = document.getElementById('similarMatches');

function getColumnSequences(prefix) {
  const sequences = [];
  for (let col=0; col<4; col++) {
    const colSeq = [];
    for (let row=0; row<4; row++) {
      const id = prefix + '-' + (row*4 + col);
      const val = parseInt(document.getElementById(id).value);
      if (isNaN(val) || val < 0 || val > 9) {
        alert('Please enter valid numbers between 0 and 9 in all boxes.');
        return null;
      }
      colSeq.push(val);
    }
    sequences.push(colSeq);
  }
  return sequences;
}

function generatePermutationsFromSequences(sequences) {
  const results = [];
  function backtrack(index, current) {
    if (index === sequences.length) {
      results.push(current.join(''));
      return;
    }
    for (const num of sequences[index]) {
      backtrack(index + 1, [...current, num]);
    }
  }
  backtrack(0, []);
  return results;
}
function getSortedDigits(p) {
  return p.split('').sort().join('');
}

btnGenerate.onclick = () => {
  exactMatchesDiv.innerHTML = '';
  similarMatchesDiv.innerHTML = '';

  const seqs1 = getColumnSequences('g1');
  const seqs2 = getColumnSequences('g2');

  if (!seqs1 || !seqs2) return;

  const perms1 = generatePermutationsFromSequences(seqs1);
  const perms2 = generatePermutationsFromSequences(seqs2);

  const set2 = new Set(perms2);

  // Find exact matches
  const exactMatches = perms1.filter(p => set2.has(p));
  displayPermutationList('exactMatches', exactMatches);

  // Map permutations of perms2 by sorted digits
  const perms2Map = new Map();
  for (const p of perms2) {
    const key = getSortedDigits(p);
    if (!perms2Map.has(key)) perms2Map.set(key, []);
    perms2Map.get(key).push(p);
  }

  // Find "similar" pairs
  const pairGroups = {}; // key: sorted digits, value: set of pair strings
  for (const p1 of perms1) {
    const sKey = getSortedDigits(p1);
    const group = perms2Map.get(sKey);
    if (group) {
      for (const p2 of group) {
        if (p1 !== p2) {
          // create a sorted key to avoid duplicates
          const pairKey = [p1, p2].sort().join('|');
          if (!pairGroups[sKey]) pairGroups[sKey] = new Set();
          pairGroups[sKey].add(pairKey);
        }
      }
    }
  }

  // Convert groups to size-based arrays
  const sizeGroups = {}; // size: array of pairs
  for (const sKey in pairGroups) {
    const pairsSet = pairGroups[sKey];
    const pairsArray = Array.from(pairsSet).map(k => {
      const [a, b] = k.split('|');
      return [a, b];
    });
    // sort pairs within group
    pairsArray.sort((a, b) => {
      if (a[0] !== b[0]) return a[0].localeCompare(b[0]);
      return a[1].localeCompare(b[1]);
    });
    const size = pairsArray.length;
    if (!sizeGroups[size]) sizeGroups[size] = [];
    sizeGroups[size] = sizeGroups[size].concat(pairsArray);
  }

  // Define order of sizes
  const sizeOrder = [24, 12, 6, 4, 1];

  // Display groups in order
  sizeOrder.forEach(size => {
    if (sizeGroups[size]) {
      sizeGroups[size].forEach(pair => {
        const div = document.createElement('div');
        div.className = 'permutation';
        div.innerText = pair[0] + '  â†”  ' + pair[1];
        similarMatchesDiv.appendChild(div);
      });
    }
  });
  // If no groups found
  if (similarMatchesDiv.children.length === 0) {
    similarMatchesDiv.innerHTML = '<p>No pairs found.</p>';
  }
};

function displayPermutationList(elementId, permList) {
  const container = document.getElementById(elementId);
  container.innerHTML = '';
  if (permList.length === 0) {
    container.innerHTML = '<p>No permutations found.</p>';
    return;
  }
  // Remove duplicates
  const uniquePerms = Array.from(new Set(permList));
  uniquePerms.sort();
  uniquePerms.forEach(p => {
    const span = document.createElement('span');
    span.className = 'permutation';
    span.innerText = p;
    container.appendChild(span);
  });
}

document.getElementById('exportBtn').onclick = () => {
  const containerDiv = document.getElementById('resultsContainer');

  // Save original maxHeight
  const originalMaxHeight = containerDiv.style.maxHeight;

  // Remove scrolling constraints temporarily
  containerDiv.style.maxHeight = 'none';

  // Use html2canvas to capture the entire container
  html2canvas(document.getElementById('container'), { scale: 2 }).then(canvas => {
    // Restore the original maxHeight
    containerDiv.style.maxHeight = originalMaxHeight;

    // Trigger download
    const link = document.createElement('a');
    link.download = 'permutation_list_full.jpeg';
    link.href = canvas.toDataURL('image/jpeg', 0.9);
    link.click();
  });
};
</script>

<script></script></body></html>